{% extends "layouts/app.twig" %}
{% block content %}

    <section class="bg-image bg-dark py-5 py-lg-7 px-4 px-lg-0" style="background-color: rgb(52, 53, 56) !important;">
        <img class="background" src="{{ assets('/img/cover.jpg') }}" alt="">
        <div class="container">
            <div class="row align-items-center text-center">
                <div class="col-md-8 mx-auto">
                    <h1 class="display-5 text-white font-weight-bold">
                        Maps
                    </h1>
                </div>
            </div>
        </div>
    </section>
    <div class="alert" style="background: #242424;">
        <div class="container">
            <div class="row d-flex align-items-center">
                <div class="col-sm-1" style="text-align: center">
                    <i class="fas fa-info-circle fa-3x" style="color: #45d6f5"></i>
                </div>
                <div class="col text-white">
                    <strong>Apply To Become a Ranking Supervisor</strong><br>
                    We are currently looking for active and experienced mappers to join our ranking supervisor team.
                    If you are interested, you can send in an application <a href="https://forms.gle/qHxoxrA8B2zP7G1y5" target="_blank">here</a>.
                </div>
            </div>
        </div>
    </div>
    <section id="filters">
        <div class="container">
            {% include "layouts/alert.twig" %}
            <form method="GET" id="maps_search">
                <div class="widget mt-4">
                    <div class="widget-header">Filters</div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="input-group mb-4">
                            <input type="text" class="form-control" placeholder="Search..." name="search" value="{{ search|escape }}">
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2">Mode:</label>
                            <div class="col-sm-4">
                                <div class="form-check form-check-inline">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" name="mode" class="custom-control-input" id="mode1" value="1"
                                                {% if not form|length or (form.mode == "1" or form.mode[0] == "1") %} checked {% endif %}>
                                        <label class="custom-control-label" for="mode1">4 Keys</label>
                                    </div>
                                </div>
                                <div class="form-check form-check-inline ml-4">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" name="mode" class="custom-control-input" id="mode2" value="2"
                                                {% if not form|length or (form.mode == "2" or form.mode[1] == "2") %} checked {% endif %}>
                                        <label class="custom-control-label" for="mode2">7 Keys</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2">Status:</label>
                            <div class="col-sm-4">
                                <div class="form-check form-check-inline">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" name="status" class="custom-control-input" id="ranked" value="2"
                                                {% if not form|length or (form.status == "2" or form.status[0] == "2") %} checked {% endif %}>
                                        <label class="custom-control-label" for="ranked">Ranked</label>
                                    </div>
                                </div>
                                <div class="form-check form-check-inline ml-4">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" name="status" class="custom-control-input" id="unranked" value="1"
                                                {% if form.status == "1" or form.status[1] == "1" %} checked {% endif %}>
                                        <label class="custom-control-label" for="unranked">Unranked</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2">Difficulty Rating:</label>
                            <div class="col-sm-2">
                                <input class="form-control" type="number" name="mindiff" value="{{ form.mindiff|escape }}" placeholder="Min Rating">
                            </div>
                            <div class="col-sm-2">
                                <input class="form-control" type="number" name="maxdiff" value="{{ form.maxdiff|escape }}" placeholder="Max Rating">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2">Length:</label>
                            <div class="col-sm-2">
                                <input class="form-control" type="number" name="minlen" value="{{ form.minlen|escape }}" placeholder="Min Length">
                            </div>
                            <div class="col-sm-2">
                                <input class="form-control" type="number" name="maxlen" value="{{ form.maxlen|escape }}" placeholder="Max Length">
                            </div>
                        </div>

                        <div class="collapse" id="advancedSearch">
                            <div class="form-group row">
                                <label class="col-sm-2">BPM:</label>
                                <div class="col-sm-2">
                                    <input class="form-control" type="number" name="minbpm" value="{{ form.minbpm|escape }}" placeholder="Min BPM">
                                </div>
                                <div class="col-sm-2">
                                    <input class="form-control" type="number" name="maxbpm" value="{{ form.maxbpm|escape }}" placeholder="Max BPM">
                                </div>
                                <label class="col-sm-2 mt-sm-3">Long Note %:</label>
                                <div class="col-sm-2">
                                    <input class="form-control" type="number" name="minnote" value="{{ form.minnote|escape }}" placeholder="Min LN%">
                                </div>
                                <div class="col-sm-2">
                                    <input class="form-control" type="number" name="maxnote" value="{{ form.maxnote|escape }}" placeholder="Max LN%">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-2">Ranked Play Count:</label>
                                <div class="col-sm-2">
                                    <input class="form-control" type="number" name="minpc" value="{{ form.minpc|escape }}" placeholder="Min Plays">
                                </div>
                                <div class="col-sm-2">
                                    <input class="form-control" type="number" name="maxpc" value="{{ form.maxpc|escape }}" placeholder="Max Plays">
                                </div>
                                <label class="col-sm-2 mt-sm-3">Max Combo:</label>
                                <div class="col-sm-2">
                                    <input class="form-control" type="number" name="mincombo" value="{{ form.mincombo|escape }}" placeholder="Min Combo">
                                </div>
                                <div class="col-sm-2">
                                    <input class="form-control" type="number" name="maxcombo" value="{{ form.maxcombo|escape }}" placeholder="Max Combo">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-2">Upload Date:</label>
                                <div class="col-sm-2">
                                    <input class="form-control" type="date" name="mindateu" value="{{ form.mindateu|escape }}" placeholder="Start Date">
                                </div>
                                <div class="col-sm-2">
                                    <input class="form-control" type="date" name="maxdateu" value="{{ form.maxdateu|escape }}" placeholder="End Date">
                                </div>
                                <label class="col-sm-2 mt-sm-3">Last Updated Date:</label>
                                <div class="col-sm-2">
                                    <input class="form-control" type="date" name="mindatelu" value="{{ form.mindatelu|escape }}" placeholder="Start Date">
                                </div>
                                <div class="col-sm-2">
                                    <input class="form-control" type="date" name="maxdatelu" value="{{ form.maxdatelu|escape }}" placeholder="End Date">
                                </div>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary" id="searchMap">Search</button>
                        <a data-toggle="collapse" href="#advancedSearch" role="button" aria-expanded="false" class="btn btn-link">Advanced Search</a>
                    </div>
                </div>
            </form>
        </div>
        <div class="container">
            <div class="row" id="maps">
                {% include 'maps/mapsets.twig' with {'data': 'maps'} %}
            </div>
            <div class="text-center mt-4">
                <button type="button" class="btn btn-primary w-50" id="more">Load More</button>
            </div>
        </div>
    </section>

{% endblock %}

{% block style %}

{% endblock %}

{% block scripts %}
    <script>
        try {
            window['query'] = {
                search: "{{ query.search|escape }}",
                status: parseInt("{{ query.status|escape }}"),
                mode: "{{ query.mode|escape }}"
            };
        } catch (e) {
            console.log(e);
            console.log('Failed to parse query');
        }
    </script>
    <script src="{{ assets('/js/plugins/lazyload.min.js') }}"></script>
    <script defer src="{{ assets('/js/maps.js') }}"></script>
    <script defer src="{{ assets('/js/artists.js') }}"></script>
{% endblock %}

{% block page_scripts %}

{% endblock %}
